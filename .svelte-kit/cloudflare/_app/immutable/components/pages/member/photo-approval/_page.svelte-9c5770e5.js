import{S as ut,i as ht,s as dt,k as E,a as G,l as k,m as _,c as U,h as m,n as c,F as Ye,p as pe,b as ve,G as f,I as ge,U as Be,B as Xe,J as ft,$ as gt,o as pt,ap as vt,aq as wt,E as Ie,R as he,ae as De,q as oe,w as Je,C as xe,a3 as _t,r as ie,x as Qe,D as Me,y as Ke,H as $e,af as Ae,u as Oe,Q as et,f as tt,t as nt,z as ot}from"../../../../chunks/index-a92439aa.js";import{R as bt}from"../../../../chunks/RangeSlider-acb2c791.js";import{e as it}from"../../../../chunks/forms-c2af5638.js";import{t as Le}from"../../../../chunks/toast-641a2893.js";function rt(t,e,n){return t>=e*n?{width:e*n,height:e}:{width:t,height:t/n}}function Ze(t,e,n,s){return{x:st(t.x,e.width,n.width,s),y:st(t.y,e.height,n.height,s)}}function st(t,e,n,s){const r=e*s/2-n/2;return Math.min(r,Math.max(t,-r))}function at(t,e){return Math.sqrt(Math.pow(t.y-e.y,2)+Math.pow(t.x-e.x,2))}function yt(t,e,n,s,r,u=!0){const g=u?Et:kt,i={x:g(100,((e.width-n.width/r)/2-t.x/r)/e.width*100),y:g(100,((e.height-n.height/r)/2-t.y/r)/e.height*100),width:g(100,n.width/e.width*100/r),height:g(100,n.height/e.height*100/r)},d=g(e.naturalWidth,i.width*e.naturalWidth/100,!0),a=g(e.naturalHeight,i.height*e.naturalHeight/100,!0),M=e.naturalWidth>=e.naturalHeight*s?{width:Math.round(a*s),height:a}:{width:d,height:Math.round(d/s)},D={...M,x:g(e.naturalWidth-M.width,i.x*e.naturalWidth/100,!0),y:g(e.naturalHeight-M.height,i.y*e.naturalHeight/100,!0)};return{croppedAreaPercentages:i,croppedAreaPixels:D}}function Et(t,e,n=!1){const s=n?Math.round(e):e;return Math.min(t,Math.max(0,s))}function kt(t,e){return e}function lt(t,e){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}const{window:Pt}=wt;function ct(t){let e;return{c(){e=E("div"),this.h()},l(n){e=k(n,"DIV",{class:!0,style:!0,"data-testid":!0}),_(e).forEach(m),this.h()},h(){c(e,"class","cropperArea svelte-4q75l8"),pe(e,"width",t[7].width+"px"),pe(e,"height",t[7].height+"px"),c(e,"data-testid","cropper"),Ie(e,"round",t[3]==="round"),Ie(e,"grid",t[4])},m(n,s){ve(n,e,s)},p(n,s){s[0]&128&&pe(e,"width",n[7].width+"px"),s[0]&128&&pe(e,"height",n[7].height+"px"),s[0]&8&&Ie(e,"round",n[3]==="round"),s[0]&16&&Ie(e,"grid",n[4])},d(n){n&&m(e)}}}function It(t){let e,n,s,r,u,g,i=t[7]&&ct(t);return{c(){e=E("div"),n=E("img"),r=G(),i&&i.c(),this.h()},l(d){e=k(d,"DIV",{class:!0,"data-testid":!0});var a=_(e);n=k(a,"IMG",{class:!0,src:!0,alt:!0,style:!0,crossorigin:!0}),r=U(a),i&&i.l(a),a.forEach(m),this.h()},h(){c(n,"class","image svelte-4q75l8"),Ye(n.src,s=t[2])||c(n,"src",s),c(n,"alt",""),pe(n,"transform","translate("+t[1].x+"px, "+t[1].y+"px) scale("+t[0]+")"),c(n,"crossorigin",t[5]),c(e,"class","container svelte-4q75l8"),c(e,"data-testid","container")},m(d,a){ve(d,e,a),f(e,n),t[20](n),f(e,r),i&&i.m(e,null),t[21](e),u||(g=[ge(Pt,"resize",t[10]),ge(n,"load",t[9]),ge(e,"mousedown",Be(t[11])),ge(e,"touchstart",Be(t[12])),ge(e,"wheel",Be(t[13]))],u=!0)},p(d,a){a[0]&4&&!Ye(n.src,s=d[2])&&c(n,"src",s),a[0]&3&&pe(n,"transform","translate("+d[1].x+"px, "+d[1].y+"px) scale("+d[0]+")"),a[0]&32&&c(n,"crossorigin",d[5]),d[7]?i?i.p(d,a):(i=ct(d),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},i:Xe,o:Xe,d(d){d&&m(e),t[20](null),i&&i.d(),t[21](null),u=!1,ft(g)}}}function Dt(t,e,n){let{image:s}=e,{crop:r={x:0,y:0}}=e,{zoom:u=1}=e,{aspect:g=4/3}=e,{minZoom:i=1}=e,{maxZoom:d=3}=e,{cropSize:a=null}=e,{cropShape:N="rect"}=e,{showGrid:M=!0}=e,{zoomSpeed:D=1}=e,{crossOrigin:Y=null}=e,{restrictPosition:O=!0}=e,v=null,V={width:0,height:0,naturalWidth:0,naturalHeight:0},P=null,x=null,w=null,F={x:0,y:0},X={x:0,y:0},j=0,h=null,S=null;const b=gt();pt(()=>{w&&w.complete&&de(),P&&(P.addEventListener("gesturestart",L),P.addEventListener("gesturechange",L))}),vt(()=>{P&&(P.removeEventListener("gesturestart",L),P.removeEventListener("gesturechange",L)),re()});const L=o=>o.preventDefault(),re=()=>{typeof document<"u"&&(document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",Z),document.removeEventListener("touchmove",R),document.removeEventListener("touchend",Z))},de=()=>{$(),B()},se=()=>a?a.width/a.height:g,$=()=>{w&&(V={width:w.width,height:w.height,naturalWidth:w.naturalWidth,naturalHeight:w.naturalHeight},n(7,v=a||rt(w.width,w.height,g))),P&&(x=P.getBoundingClientRect())},ee=o=>({x:Number(o.clientX),y:Number(o.clientY)}),H=o=>({x:Number(o.clientX),y:Number(o.clientY)}),z=o=>{document.addEventListener("mousemove",C),document.addEventListener("mouseup",Z),ae(ee(o))},C=o=>le(ee(o)),T=o=>{document.addEventListener("touchmove",R,{passive:!1}),document.addEventListener("touchend",Z),o.touches.length===2?J(o):o.touches.length===1&&ae(H(o.touches[0]))},R=o=>{o.preventDefault(),o.touches.length===2?q(o):o.touches.length===1&&le(H(o.touches[0]))},ae=({x:o,y:p})=>{F={x:o,y:p},X={x:r.x,y:r.y}},le=({x:o,y:p})=>{h&&window.cancelAnimationFrame(h),h=window.requestAnimationFrame(()=>{if(o===void 0||p===void 0||!v)return;const y=o-F.x,K=p-F.y,W={x:X.x+y,y:X.y+K};n(1,r=O?Ze(W,V,v,u):W)})},Z=()=>{re(),B()},J=o=>{const p=H(o.touches[0]),y=H(o.touches[1]);j=at(p,y),ae(lt(p,y))},q=o=>{const p=H(o.touches[0]),y=H(o.touches[1]),K=lt(p,y);le(K),S&&window.cancelAnimationFrame(S),S=window.requestAnimationFrame(()=>{const W=at(p,y),Se=u*(W/j);ce(Se,K),j=W})},Q=o=>{const p=ee(o),y=u-o.deltaY*D/200;ce(y,p)},we=({x:o,y:p})=>{if(!x)throw new Error("The Cropper is not mounted");return{x:x.width/2-(o-x.left),y:x.height/2-(p-x.top)}},fe=({x:o,y:p})=>({x:(o+r.x)/u,y:(p+r.y)/u}),ce=(o,p)=>{if(!v)return;const y=we(p),K=fe(y);n(0,u=Math.min(d,Math.max(o,i)));const W={x:K.x*u-y.x,y:K.y*u-y.y};n(1,r=O?Ze(W,V,v,u):W)},B=()=>{if(!v||v.width===0)return;const o=O?Ze(r,V,v,u):r,{croppedAreaPercentages:p,croppedAreaPixels:y}=yt(o,V,v,se(),u,O);b("cropcomplete",{percent:p,pixels:y})};function te(o){he[o?"unshift":"push"](()=>{w=o,n(6,w)})}function me(o){he[o?"unshift":"push"](()=>{P=o,n(8,P)})}return t.$$set=o=>{"image"in o&&n(2,s=o.image),"crop"in o&&n(1,r=o.crop),"zoom"in o&&n(0,u=o.zoom),"aspect"in o&&n(14,g=o.aspect),"minZoom"in o&&n(15,i=o.minZoom),"maxZoom"in o&&n(16,d=o.maxZoom),"cropSize"in o&&n(17,a=o.cropSize),"cropShape"in o&&n(3,N=o.cropShape),"showGrid"in o&&n(4,M=o.showGrid),"zoomSpeed"in o&&n(18,D=o.zoomSpeed),"crossOrigin"in o&&n(5,Y=o.crossOrigin),"restrictPosition"in o&&n(19,O=o.restrictPosition)},t.$$.update=()=>{t.$$.dirty[0]&147520&&w&&n(7,v=a||rt(w.width,w.height,g)),t.$$.dirty[0]&1&&u&&B()},[u,r,s,N,M,Y,w,v,P,de,$,z,T,Q,g,i,d,a,D,O,te,me]}class xt extends ut{constructor(e){super(),ht(this,e,Dt,It,dt,{image:2,crop:1,zoom:0,aspect:14,minZoom:15,maxZoom:16,cropSize:17,cropShape:3,showGrid:4,zoomSpeed:18,crossOrigin:5,restrictPosition:19},null,[-1,-1])}}const Mt=t=>new Promise((e,n)=>{const s=new Image;s.addEventListener("load",()=>e(s)),s.addEventListener("error",r=>n(r)),s.setAttribute("crossOrigin","anonymous"),s.src=t});async function At(t,e,n){const s=await Mt(t),r=document.createElement("canvas");r.width=e.width,r.height=e.height;const u=r.getContext("2d");u.fillStyle="#ffffff",u.fillRect(0,0,r.width,r.height),u.drawImage(s,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const i=await(await fetch(n)).blob(),d=await createImageBitmap(i),a=u.createPattern(d,"no-repeat");return u.translate(r.width-d.width-10,r.height-d.height-10),u.rect(0,0,r.width,r.height),u.fillStyle=a,u.fill(),r.toDataURL("image/jpeg")}function Ot(t){var Ve,je,Ce,Fe;let e,n,s,r,u,g,i,d,a,N,M,D,Y,O,v,V,P,x,w=((Ve=t[5])==null?void 0:Ve.width)+"",F,X,j=((je=t[5])==null?void 0:je.height)+"",h,S,b,L=((Ce=t[0].photoApproval)==null?void 0:Ce.fullName)+"",re,de,se,$=((Fe=t[0].photoApproval)==null?void 0:Fe.genderName)+"",ee,H,z,C,T,R,ae,le,Z,J,q,Q,we,fe,ce,B,te,me,o,p,y;function K(l){t[12](l)}function W(l){t[13](l)}function Se(l){t[14](l)}let Ee={image:t[8]};t[2]!==void 0&&(Ee.crop=t[2]),t[4]!==void 0&&(Ee.zoom=t[4]),t[3]!==void 0&&(Ee.cropSize=t[3]),a=new xt({props:Ee}),he.push(()=>De(a,"crop",K,t[2])),he.push(()=>De(a,"zoom",W,t[4])),he.push(()=>De(a,"cropSize",Se,t[3])),a.$on("cropcomplete",t[15]);function mt(l){t[16](l)}let Ne={min:1,max:10,step:.01};return t[1]!==void 0&&(Ne.values=t[1]),v=new bt({props:Ne}),he.push(()=>De(v,"values",mt,t[1])),{c(){e=G(),n=E("div"),s=E("div"),r=E("div"),u=oe("Foto\u011Fraf Onay\u0131"),g=G(),i=E("div"),d=E("div"),Je(a.$$.fragment),Y=G(),O=E("div"),Je(v.$$.fragment),P=G(),x=E("div"),F=oe(w),X=oe(" x "),h=oe(j),S=G(),b=E("div"),re=oe(L),de=G(),se=E("div"),ee=oe($),H=G(),z=E("div"),C=E("button"),T=xe("svg"),R=xe("path"),ae=oe(`
                    Onayla`),le=G(),Z=E("form"),J=E("button"),q=xe("svg"),Q=xe("path"),we=oe(`
                    Sil`),ce=G(),B=E("form"),te=E("button"),this.h()},l(l){_t("svelte-2o0478",document.head).forEach(m),e=U(l),n=k(l,"DIV",{});var ne=_(n);s=k(ne,"DIV",{class:!0});var ue=_(s);r=k(ue,"DIV",{class:!0});var _e=_(r);u=ie(_e,"Foto\u011Fraf Onay\u0131"),_e.forEach(m),g=U(ue),i=k(ue,"DIV",{class:!0});var A=_(i);d=k(A,"DIV",{class:!0});var be=_(d);Qe(a.$$.fragment,be),be.forEach(m),Y=U(A),O=k(A,"DIV",{});var ye=_(O);Qe(v.$$.fragment,ye),ye.forEach(m),P=U(A),x=k(A,"DIV",{});var ke=_(x);F=ie(ke,w),X=ie(ke," x "),h=ie(ke,j),ke.forEach(m),S=U(A),b=k(A,"DIV",{class:!0});var He=_(b);re=ie(He,L),He.forEach(m),de=U(A),se=k(A,"DIV",{});var ze=_(se);ee=ie(ze,$),ze.forEach(m),H=U(A),z=k(A,"DIV",{class:!0});var Pe=_(z);C=k(Pe,"BUTTON",{class:!0});var Te=_(C);T=Me(Te,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var Re=_(T);R=Me(Re,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),_(R).forEach(m),Re.forEach(m),ae=ie(Te,`
                    Onayla`),Te.forEach(m),le=U(Pe),Z=k(Pe,"FORM",{action:!0});var We=_(Z);J=k(We,"BUTTON",{class:!0});var qe=_(J);q=Me(qe,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var Ge=_(q);Q=Me(Ge,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),_(Q).forEach(m),Ge.forEach(m),we=ie(qe,`
                    Sil`),qe.forEach(m),We.forEach(m),Pe.forEach(m),A.forEach(m),ue.forEach(m),ne.forEach(m),ce=U(l),B=k(l,"FORM",{class:!0,action:!0});var Ue=_(B);te=k(Ue,"BUTTON",{type:!0}),_(te).forEach(m),Ue.forEach(m),this.h()},h(){document.title="Hesab\u0131m \u2022 Foto\u011Fraf Onay\u0131",c(r,"class","bg-[#fbfcff] border-b border-gray-100 p-6 rounded-t-lg text-lg font-semibold"),c(d,"class","w-[300px] h-[300px] bg-black relative mx-auto"),c(b,"class","font-semibold text-blue-700"),c(R,"stroke-linecap","round"),c(R,"stroke-linejoin","round"),c(R,"d","M4.5 12.75l6 6 9-13.5"),c(T,"xmlns","http://www.w3.org/2000/svg"),c(T,"fill","none"),c(T,"viewBox","0 0 24 24"),c(T,"stroke-width","1.5"),c(T,"stroke","currentColor"),c(T,"class","w-5 h-5 mr-1 inline-block"),c(C,"class","bg-blue-700 hover:bg-blue-900 py-2 px-4 text-sm md:text-lg md:py-3 md:px-6 text-center rounded-full justify-center text-white block md:inline-block"),c(Q,"stroke-linecap","round"),c(Q,"stroke-linejoin","round"),c(Q,"d","M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"),c(q,"xmlns","http://www.w3.org/2000/svg"),c(q,"fill","none"),c(q,"viewBox","0 0 24 24"),c(q,"stroke-width","1.5"),c(q,"stroke","currentColor"),c(q,"class","w-5 h-5 mr-1 inline-block"),c(J,"class","bg-red-700 hover:bg-red-900 py-2 px-4 text-sm md:text-lg md:py-3 md:px-6 text-center rounded-full justify-center text-white block md:inline-block"),c(Z,"action","?/decline"),c(z,"class","flex gap-4 justify-center"),c(i,"class","flex flex-col gap-4 p-6 text-center"),c(s,"class","grow bg-white rounded-lg shadow-md"),c(te,"type","submit"),c(B,"class","hidden"),c(B,"action","?/approve")},m(l,I){ve(l,e,I),ve(l,n,I),f(n,s),f(s,r),f(r,u),f(s,g),f(s,i),f(i,d),Ke(a,d,null),f(i,Y),f(i,O),Ke(v,O,null),f(i,P),f(i,x),f(x,F),f(x,X),f(x,h),f(i,S),f(i,b),f(b,re),f(i,de),f(i,se),f(se,ee),f(i,H),f(i,z),f(z,C),f(C,T),f(T,R),f(C,ae),f(z,le),f(z,Z),f(Z,J),f(J,q),f(q,Q),f(J,we),ve(l,ce,I),ve(l,B,I),f(B,te),t[18](te),o=!0,p||(y=[ge(C,"click",t[11]),$e(fe=it.call(null,Z,t[17])),$e(me=it.call(null,B,t[19]))],p=!0)},p(l,[I]){var _e,A,be,ye;const ne={};I&256&&(ne.image=l[8]),!N&&I&4&&(N=!0,ne.crop=l[2],Ae(()=>N=!1)),!M&&I&16&&(M=!0,ne.zoom=l[4],Ae(()=>M=!1)),!D&&I&8&&(D=!0,ne.cropSize=l[3],Ae(()=>D=!1)),a.$set(ne);const ue={};!V&&I&2&&(V=!0,ue.values=l[1],Ae(()=>V=!1)),v.$set(ue),(!o||I&32)&&w!==(w=((_e=l[5])==null?void 0:_e.width)+"")&&Oe(F,w),(!o||I&32)&&j!==(j=((A=l[5])==null?void 0:A.height)+"")&&Oe(h,j),(!o||I&1)&&L!==(L=((be=l[0].photoApproval)==null?void 0:be.fullName)+"")&&Oe(re,L),(!o||I&1)&&$!==($=((ye=l[0].photoApproval)==null?void 0:ye.genderName)+"")&&Oe(ee,$),fe&&et(fe.update)&&I&512&&fe.update.call(null,l[17]),me&&et(me.update)&&I&576&&me.update.call(null,l[19])},i(l){o||(tt(a.$$.fragment,l),tt(v.$$.fragment,l),o=!0)},o(l){nt(a.$$.fragment,l),nt(v.$$.fragment,l),o=!1},d(l){l&&m(e),l&&m(n),ot(a),ot(v),l&&m(ce),l&&m(B),t[18](null),p=!1,ft(y)}}}let Lt="http://localhost:5173/watermark.png",St="image/jpeg";function Tt(t,e,n){let s,r,{data:u}=e,g={x:0,y:0,width:300,height:300},i={width:300,height:300},d=1,a,N,M,D=[1];const Y=h=>{h.percent,n(5,a=h.pixels)},O=async()=>{const h=await At(r,a,Lt);console.log(h);const S=h.split(",");n(6,N=S[1]),M.click()};function v(h){g=h,n(2,g)}function V(h){d=h,n(4,d),n(1,D)}function P(h){i=h,n(3,i)}const x=h=>Y(h.detail);function w(h){D=h,n(1,D)}const F=({data:h})=>(h.set("id",s),({update:S,result:b})=>{b.type==="success"&&(h.photoApproval=b.data,Le("\u0130\u015Flem ba\u015Far\u0131yla tamamland\u0131!","success")),b.type==="invalid"&&Object.values(b.data).forEach(L=>{Le(L,"warning")}),S({reset:!0})});function X(h){he[h?"unshift":"push"](()=>{M=h,n(7,M)})}const j=({data:h})=>(h.set("id",s),h.set("photo",N),h.set("photoType",St),({update:S,result:b})=>{b.type==="success"&&(h.photoApproval=b.data,Le("\u0130\u015Flem ba\u015Far\u0131yla tamamland\u0131!","success")),b.type==="invalid"&&Object.values(b.data).forEach(L=>{Le(L,"warning")}),S({reset:!0})});return t.$$set=h=>{"data"in h&&n(0,u=h.data)},t.$$.update=()=>{t.$$.dirty&2&&D&&n(4,d=D[0]),t.$$.dirty&1&&n(9,s=u.photoApproval.id),t.$$.dirty&1&&n(8,r="https://d1ql1h7f6x0zr6.cloudfront.net/"+u.photoApproval.url)},[u,D,g,i,d,a,N,M,r,s,Y,O,v,V,P,x,w,F,X,j]}class Vt extends ut{constructor(e){super(),ht(this,e,Tt,Ot,dt,{data:0})}}export{Vt as default};
